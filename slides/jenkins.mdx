import { Image } from 'mdx-deck'
import { themes } from 'mdx-deck'
export const theme = themes.code



# Jenkins
## Jenkinsfiles

---
# Clasic Jenkins

[new Job](https://jenkins2.gamevy.com/view/all/newJob)

🤬 F!@#inkg boring 🤬 Copy from or fail 🤬

---

<Image src="https://media.giphy.com/media/BgBf6pW9qOgQU/giphy.gif" />

# ok, boomer

---
# This is a new 🌍

[Jenkins pipelines](https://jenkins.io/doc/book/pipeline/)

[declarative](https://jenkins.io/doc/book/pipeline/#declarative-pipeline-fundamentals) VS
[scripted](https://jenkins.io/doc/book/pipeline/#scripted-pipeline-fundamentals)


---
# Example

[VvV Jenkinsfile](https://github.com/gluckgames/vegans-vs-vampires/blob/master/Jenkinsfile) <br />
[Output](https://jenkins2.gamevy.com/view/vegans%20vs%20vampires/job/vegans-vs-vampires-pull-request/)

---
<Image src="https://media.giphy.com/media/mMDA2ZvTdzJPk6RAlP/giphy.gif"/>

---
# Steps, what can I do? 

## Short answer, anything you have '`sh`' scripts
## [Long answer](https://jenkins.io/doc/pipeline/steps/) (⚠️ some need a plugging ⚠️)

---
# Tools
## Example: [Node version](https://github.com/gluckgames/vegans-vs-vampires/blob/master/Jenkinsfile#L3)
```
pipeline {
    agent any
    tools {nodejs "v10"}
    stages {
```
---
# Wrappers
## Timestamps:
```groovy
    // Adds timestamps to the output logged by steps inside the wrapper.
    timestamps {
        // Just some echoes to show the timestamps.
        stage "First echo"
        echo "Hey, look, I'm echoing with a timestamp!"

        // A sleep to make sure we actually get a real difference!
        stage "Sleeping"
        sleep 30

        // And a final echo to show the time when we wrap up.
        stage "Second echo"
        echo "Wonder what time it is now?"
    }
```
---
# Wrappers
## Colors
```groovy
    ansiColor('xterm') {
            // Just some echoes to show the ANSI color.
            stage "\u001B[31mI'm Red\u001B[0m Now not"
        }
```
⚠️ plugging required ⚠️


---
# How do I configure a pipeline? 

- [new Job](https://jenkins2.gamevy.com/view/all/newJob)
- choose a name and `Pipeline` type.
- description, triggers...
- Pipeline script from SCM.
- Lightweight checkout (master ✅, pr-branch ❌)
- FUN!

##### [local example](http://localhost/job/get-upgradeable-package-list-TEST/configure)

---

<Image src="https://media.giphy.com/media/ZXKZWB13D6gFO/giphy.gif"/>

# Still boring

---
# [Job-dsl ](https://jenkinsci.github.io/job-dsl-plugin/)
## to the rescue
# 🤩

---

<Image src="https://media.giphy.com/media/UrEQirmnMPxBwToULv/giphy.gif"/>

# Demo

---

# why did I do all this crap?
<Steps>

- me: Dan, can I install a plugging in jenkins2?
- ( do you expect a yes/no answer?)
- 😂😂😂😂😂😂
- Dan: Can we sneek? 
- 20m latter, I had a new task.

</Steps>


---

# The end


